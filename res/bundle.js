(()=>{"use strict";var e,t={710:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.decompose=function(e){var t="";return(e=e.trim()).startsWith("-")&&(t="-",e=e.substring(1).trim()),{negation:t,baseTag:e}},e}();t.default=o},885:function(e,t,o){var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(a,n){function s(e){try{c(r.next(e))}catch(e){n(e)}}function i(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var o,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(i){return function(c){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;n&&(n=0,i[0]&&(s=0)),s;)try{if(o=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var n=o(882),s=o(710),i=o(558),c=function(){function e(){}return e.verifyCache=function(e,t,o){return r(this,void 0,void 0,(function(){var r,s;return a(this,(function(a){switch(a.label){case 0:if(!(localStorage.getItem(e.id+"-version")!=o||Date.now()-parseInt(localStorage.getItem(e.id+"-last-update")||"0")>6048e5))return[3,5];console.log("Fetching ".concat(e.name," tags from summary page: ").concat(t)),r=void 0,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,n.asyncGetJSON)(t)];case 2:return r=a.sent(),[3,4];case 3:return s=a.sent(),console.log("Could not fetch ".concat(e.name," tags from summary page")),console.error(s),[2];case 4:return localStorage.setItem(e.id+"-version",o),localStorage.setItem(e.id+"-last-update",Date.now().toString()),localStorage.setItem(e.id+"-tags",r.data),console.log("Updated ".concat(e.name," tag cache")),[3,6];case 5:console.log("Found ".concat(e.name," tag cache")),a.label=6;case 6:return[2,localStorage.getItem("yandere-tags")]}}))}))},e.createTagSearchRegex=function(e,t){void 0===t&&(t={});var o=e.split(""),r=[],a="(([^`]*_)?";if(o.forEach((function(e){var t=e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");a+=t})),a+=")",r.push(a),-1!==e.indexOf("_")){var n=e.split("_",1)[0],s=e.slice(n.length+1),i=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),c=s.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");a="(",a+="("+i+"[^`]*_"+c+")",a+="|",a+="("+c+"[^`]*_"+i+")",a+=")",r.push(a)}!t.top_results_only&&o.length<12&&(a="(",o.forEach((function(e){var t=e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");a+=t,a+="[^`]*"})),a+=")",r.push(a));var l=r.join("|");return new RegExp("(\\d+)[^ ]*`("+l+")[^`]*`[^ ]* ","g")},e.retrieveTagSearch=function(e,t,o){void 0===o&&(o={});var r=[],a=10;for(void 0!==o.max_results&&(a=o.max_results);r.length<a;){var n=e.exec(t);if(!n)break;var s=n[0];-1===s.indexOf(":deletethistag:")&&-1===r.indexOf(s)&&r.push(s)}return r},e.reorderSearchResults=function(t,o){var r=e.createTagSearchRegex(t,{top_results_only:!0,global:!1}),a=[],n=[];return o.forEach((function(e){r.test(e)?a.push(e):n.push(e)})),a.concat(n)},e.complete=function(e,t,o){var r=s.default.decompose(e),a=r.negation,n=r.baseTag;if(0==n.length)return[];var c=this.createTagSearchRegex(n,{global:!0}),l=this.retrieveTagSearch(c,t,{max_results:100});l=(l=this.reorderSearchResults(n,l)).slice(0,10),-1!="sqe".indexOf(n)&&l.unshift("0`"+n+"` ");for(var u=[],h=0,p=l;h<p.length;h++){var d=p[h],f=d.match(/(\d+)`([^`]*)`(([^ ]*)`)? /);if(!f)return void console.error("Unparsable cached tag: '"+d+"'");var g=new s.default;g.value=a+f[2],g.label=g.value,g.type=o[f[1]]||i.default.Other,u.push(g)}return u},e}();t.default=c},263:function(e,t,o){var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(a,n){function s(e){try{c(r.next(e))}catch(e){n(e)}}function i(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var o,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(i){return function(c){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;n&&(n=0,i[0]&&(s=0)),s;)try{if(o=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},n=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var r,a=0,n=t.length;a<n;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var s=o(431),i=function(){function e(){}return e.onHeaderSearchClick=function(e){e.stopPropagation(),this.searchViewOpen?this.hideSearchView():this.showSearchView()},e.closeSearchByClick=function(e){this.searchViewOpen&&!this.$viewSearch[0].contains(e.target)&&(this.$viewSearch.hide(),this.searchViewOpen=!1,e.preventDefault())},e.onSearchInputKeyDown=function(e){if("Enter"===e.key){if(""===this.$searchInput.val())return void this.search();if(this.selectedAutocompleteTag>-1)(o=this.$autocompleteTags.children()).eq(this.selectedAutocompleteTag).trigger("click");else{this.suppressAutocomplete=!0;var t=this.$searchInput.val();this.addSearchTag(t),this.$searchInput.val(""),this.$autocompleteTags.empty(),this.$autocompleteTags.hide()}}else if("ArrowDown"==e.key){e.preventDefault(),this.selectedAutocompleteTag++;var o=this.$autocompleteTags.children();this.selectedAutocompleteTag>=o.length&&(this.selectedAutocompleteTag=0),this.selectAutocompleteTag(this.selectedAutocompleteTag)}else"ArrowUp"==e.key?(e.preventDefault(),this.selectedAutocompleteTag--,this.selectedAutocompleteTag<0&&(this.selectedAutocompleteTag=this.$autocompleteTags.children().length-1),this.selectAutocompleteTag(this.selectedAutocompleteTag)):"Escape"==e.key&&(this.selectedAutocompleteTag>-1?this.unselectAutocompleteTags():this.hideSearchView())},e.onSearchInputChange=function(){var e=this;this.suppressAutocomplete?this.suppressAutocomplete=!1:s.default.current.autocompleteEnabled?s.default.current.autocomplete(this.$searchInput.val(),(function(t){e.updateAutocompleteTags(t)}),(function(){}),(function(e){console.error(e)})):this.$autocompleteTags.hide()},e.onSearchCancelClick=function(e){e.stopPropagation(),this.$resultsFooterText.text("Currently showing "+this.posts.length+' images.\n\nNote that due to technical limitations, if you click "Show more...", you will get some repeat posts.'),this.$btnFooterSearch.hide(),this.$btnLoadMore.show(),this.$btnCancelSearch.hide(),s.default.current.abortSearch()},e.onNextPostClick=function(e){var t=this;null==e||e.stopPropagation(),this.currentPost<this.posts.length-1&&this.openPost(this.posts[++this.currentPost],(function(){t.currentPost<t.posts.length-1&&t.preloadImage(t.posts[t.currentPost+1].getLargeImage(),(function(e){t.cachedImage=e}))})),this.$btnNextPost.trigger("blur")},e.onPrevPostClick=function(e){var t=this;null==e||e.stopPropagation(),this.currentPost>0&&this.openPost(this.posts[--this.currentPost],(function(){t.currentPost>0&&t.preloadImage(t.posts[t.currentPost-1].getLargeImage(),(function(e){t.cachedImage=e}))})),this.$btnPrevPost.trigger("blur")},e.onWindowKeyDown=function(e){this.openedPost&&("ArrowRight"===e.key?this.onNextPostClick():"ArrowLeft"===e.key&&this.onPrevPostClick())},e.onCopyButtonPressed=function(e){var t=this;e.stopPropagation();var o="".concat(window.location.origin,"/post/").concat(this.openedPost.site.id,"/").concat(this.openedPost.id),r=document.createElement("textarea");r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="2em",r.style.height="2em",r.style.padding="0",r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",r.value=o,document.body.appendChild(r),r.focus(),r.select();try{var a=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+a)}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(r),this.$btnCopyLink.text("Copied!"),setTimeout((function(){t.$btnCopyLink.text("Copy link")}),2e3),this.$btnCopyLink.trigger("blur")},e.onDownloadButtonPressed=function(e){e.stopPropagation();var t=window.location.origin+"/download/"+this.openedPost.getFullSizeImage(),o=t.split(".").pop(),r="".concat(this.openedPost.site.id,"-").concat(this.openedPost.id,".").concat(o),a=document.createElement("a");a.href=t,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),this.$btnDownload.trigger("blur")},e.onClosePostClick=function(e){e.stopPropagation(),this.$postPlaceholder.show(),this.$post.hide(),this.$postVideo.trigger("pause"),this.$postVideo.attr("src",""),this.$postVideo.attr("poster",""),this.$postImage.attr("src",""),this.$postDownscaleWarning.hide(),window.innerWidth<1e3&&(this.$paneLeft.show(),this.$paneRight.hide()),this.openedPost=void 0},e.onWindowResize=function(){!this.openedPost&&window.innerWidth<1e3&&this.$paneRight.hide()},e.arraySetEquals=function(e,t){if(void 0===e||void 0===t)return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var o=0,r=e;o<r.length;o++){var a=r[o];if(!t.includes(a))return!1}for(var n=0,s=t;n<s.length;n++)if(a=s[n],!e.includes(a))return!1;return!0},e.preloadImage=function(e,t){var o=new Image;o.onload=t.bind(this,o),o.src=e},e.search=function(e){var t=this;void 0===e&&(e=!1),!e&&this.lastSearch&&s.default.current==this.lastSearch.site&&this.arraySetEquals(this.searchTags,this.lastSearch.tags)&&this.currentPage==this.lastSearch.page&&this.safeSearchEnabled==this.lastSearch.safeSearch?console.log("Same search. Cancelling."):(console.log("Searching: "+this.searchTags.join(", ")),window.history.replaceState({},"","?".concat(this.safeSearchEnabled?"":"nsfw=true&","site=").concat(s.default.current.id,"&tags=").concat(this.searchTags.join(","))),e||(this.currentPage=0),this.$resultsPlaceholder.hide(),this.$results.show(),this.$resultsFooter.show(),this.$resultsFooterText.text("Loading..."),this.$btnFooterSearch.hide(),this.$btnLoadMore.hide(),this.$btnCancelSearch.show(),e||this.clearResults(),this.lastSearch={tags:n([],this.searchTags,!0),page:this.currentPage,safeSearch:this.safeSearchEnabled,site:s.default.current},s.default.current.search(n([],this.searchTags,!0),this.currentPage,this.safeSearchEnabled,(function(e){return r(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map(this.addPost.bind(this)))];case 1:return t.sent(),[2]}}))}))}),(function(e,o){t.currentPage=e,o?(t.$resultsFooterText.text("No more images found."),t.$btnFooterSearch.show(),t.$btnLoadMore.hide(),t.$btnCancelSearch.hide()):(t.$resultsFooterText.text(""),t.$btnFooterSearch.hide(),t.$btnLoadMore.show(),t.$btnCancelSearch.hide())}),(function(e){return console.error(e)})),this.hideSearchView())},e.clearResults=function(){this.$resultsLeftColumn.empty(),this.$resultsRightColumn.empty(),this.leftColumnHeight=0,this.rightColumnHeight=0,this.posts=[]},e.addPost=function(e){var t=this;return new Promise((function(o,r){var a=new Image;a.onload=function(){t.leftColumnHeight<t.rightColumnHeight?(t.$resultsLeftColumn.append(a),t.leftColumnHeight+=e.normalisedHeight()):(t.$resultsRightColumn.append(a),t.rightColumnHeight+=e.normalisedHeight()),t.posts.push(e),o()},a.onclick=function(o){o.stopPropagation(),t.openPost(e)},a.onerror=r,a.src=e.getThumbnail(),a.className="results-image"}))},e.unselectAutocompleteTags=function(){this.selectedAutocompleteTag=-1,this.$autocompleteTags.children().removeClass("selected")},e.selectAutocompleteTag=function(e){if(this.selectedAutocompleteTag=e,!(this.selectedAutocompleteTag<0)){var t=this.$autocompleteTags.children();this.selectedAutocompleteTag>=t.length||(t.removeClass("selected"),t.eq(this.selectedAutocompleteTag).addClass("selected"))}},e.updateAutocompleteTags=function(e){var t=this;if(this.unselectAutocompleteTags(),0!=e.length){this.$autocompleteTags.show(),this.$autocompleteTags.empty();for(var o=function(e){var o=$('<button class="autocomplete-tag tag-'.concat(e.type,'">').concat(e.label,"</button>"));o.on("click touchstart",(function(o){t.suppressAutocomplete=!0,o.stopPropagation(),o.preventDefault(),t.addSearchTag(e.value),t.$searchInput.val(""),t.$autocompleteTags.empty(),t.$autocompleteTags.hide()})),r.$autocompleteTags.append(o)},r=this,a=0,n=e;a<n.length;a++)o(n[a])}else this.$autocompleteTags.hide()},e.showSearchView=function(){this.$viewSearch.show(),this.searchViewOpen=!0,this.$searchInput.trigger("focus")},e.hideSearchView=function(){this.$viewSearch.hide(),this.searchViewOpen=!1,this.$searchInput.val(""),this.$autocompleteTags.hide(),this.$autocompleteTags.empty(),this.unselectAutocompleteTags()},e.addSearchTag=function(e){var t=this;if(e=e.trim(),!this.searchTags.includes(e)){this.searchTags.push(e);var o=$('<span class="search-tag">'.concat(e,' <span class="search-tag-close">&#x2715</span></span>'));o.one("click",(function(r){r.stopPropagation(),t.searchTags.splice(t.searchTags.indexOf(e),1),o.remove(),0===t.searchTags.length&&(t.$searchTagDisplay.hide(),t.$searchTagHeaderNoTags.show())})),this.$searchTagHeaderNoTags.hide(),this.$searchCurrentTags.append(o),this.$searchTagDisplay.show()}},e.clearSearchTags=function(){this.searchTags=[],this.$searchCurrentTags.empty(),this.$searchTagDisplay.hide(),this.$searchTagHeaderNoTags.show()},e.openPost=function(e,t){var o=this;if(!this.openedPost||this.openedPost.id!==e.id){if(window.innerWidth<1e3?this.$paneLeft.hide():this.$paneLeft.show(),this.$postPlaceholder.hide(),this.$post.show(),this.$paneRight.show(),this.currentPost=this.posts.indexOf(e),console.log("Opening post "+this.currentPost),this.$postPlaceholder.hide(),this.$post.show(),e.requiresVideoPlayer)this.$postImage.hide(),this.$postVideo.show(),this.$postVideo.attr("poster",e.getThumbnail()),this.$postVideo.attr("src",e.getLargeImage()),this.$postVideo.trigger("play");else{this.$postVideo.hide(),this.$postImage.show();var r=this.cachedImage&&this.cachedImage.src===e.getLargeImage()?1:0;this.$postImage.attr("src",e.imageResolutions[r]);var a=this.$postImage[0];a.onload=function(){r>0&&t&&t();var n=Math.round(a.height/a.naturalHeight*100),s=Math.round(a.naturalHeight/e.fullHeight*100);a.naturalHeight<a.height&&n>150&&r<e.imageResolutions.length-1&&(r++,o.$postImage.attr("src",e.imageResolutions[r])),s<100?(o.$postDownscaleWarning.show(),o.$postDownscaleWarning.text("Resized to ".concat(s,"% of original"))):o.$postDownscaleWarning.hide()},a.onerror=function(){o.$postImage.attr("src",e.getThumbnail())}}if(this.$postInfoHeader.text("".concat(e.site.name," #").concat(e.id)),this.openedPost&&this.openedPost.site===e.site){for(var n in e.properties)this.postProperties[n].html("<b>".concat(n,"</b>: ").concat(e.properties[n]));for(var n in e.tagTypes)this.postTagTypes[n].text(e.tagTypes[n].join(" "))}else{for(var n in this.$postInfo.empty(),e.properties)if(e.properties[n]){var s=$('<span class="post-property"><b>'.concat(n,"</b>: ").concat(e.properties[n],"</span>"));this.postProperties[n]=s,this.$postInfo.append(s)}for(var n in this.$postTagTypes.empty(),e.tagTypes){var i=e.tagTypes[n];if(i&&0!=i.length){var c=$('<div class="post-tag-type"></div>'),l=$('<h3 class="post-tag-type-header"><b>'.concat(n,"</b></h3>"));c.append(l);var u=$('<span class="post-tag-list tag-'.concat(n.toLowerCase(),'">').concat(i.join(" "),"</span>"));c.append(u),this.postTagTypes[n]=u,this.$postTagTypes.append(c)}}}0===this.currentPost?this.$btnPrevPost.addClass("invisible"):this.$btnPrevPost.removeClass("invisible"),this.currentPost===this.posts.length-1?this.$btnNextPost.addClass("invisible"):this.$btnNextPost.removeClass("invisible"),this.openedPost=e}},e.main=function(){var e=this;if(this.$btnHeaderSearch=$("#header-search, #results-placeholder, #btn-different-search"),this.$viewSearch=$("#view-search"),this.$viewSearch.hide(),this.$searchInput=$("#search-input"),this.$searchCurrentTags=$("#search-current-tags"),this.$searchTagHeaderNoTags=$("#search-tag-header-no-tags"),this.$searchTagDisplay=$("#search-tag-display"),this.$searchTagDisplay.hide(),this.$btnClearTags=$("#btn-clear"),this.$btnExitSearch=$("#btn-exit-search"),this.$selectSearchSite=$("#search-site"),this.$btnSearch=$("#btn-search"),this.$resultsLeftColumn=$("#results-column-left"),this.$resultsRightColumn=$("#results-column-right"),this.$resultsPlaceholder=$("#results-placeholder"),this.$results=$("#results"),this.$resultsFooter=$("#results-footer"),this.$resultsFooterText=$("#results-footer-text"),this.$btnFooterSearch=$("#btn-different-search"),this.$btnLoadMore=$("#btn-load-more"),this.$autocompleteTags=$("#search-autocomplete"),this.$btnCancelSearch=$("#btn-cancel-search"),this.$postPlaceholder=$("#post-placeholder"),this.$post=$("#post"),this.$postImage=$("#post-image"),this.$postDownscaleWarning=$("#post-downscale-warning"),this.$btnPrevPost=$("#btn-prev-post"),this.$btnViewFullsize=$("#btn-view-fullsize"),this.$btnOpenOriginalPost=$("#btn-open-original"),this.$btnNextPost=$("#btn-next-post"),this.$btnCopyLink=$("#btn-copy-link"),this.$btnDownload=$("#btn-download"),this.$btnClosePost=$("#btn-close-post"),this.$postInfo=$("#post-info"),this.$postPropertySite=$("#post-property-site"),this.$postPropertyId=$("#post-property-id"),this.$postTagTypes=$("#post-tag-types"),this.$postVideo=$("#post-video"),this.$postInfoHeader=$("#post-info-header"),this.$paneLeft=$("#pane-left"),this.$paneRight=$("#pane-right"),this.$btnSafeSearch=$("#btn-safe-search"),this.$btnHeaderSearch.on("click",this.onHeaderSearchClick.bind(this)),this.$searchInput.on("keydown",this.onSearchInputKeyDown.bind(this)),this.$searchInput.on("input",this.onSearchInputChange.bind(this)),window.addEventListener("click",this.closeSearchByClick.bind(this)),this.$btnClearTags.on("click",(function(t){t.stopPropagation(),e.clearSearchTags()})),this.$btnExitSearch.on("click",(function(t){t.stopPropagation(),e.hideSearchView()})),this.$selectSearchSite.append(s.default.sites.map((function(e){return'<option value="'.concat(e.id,'" ').concat(e.isPorn?'class="nsfw-site"':"",">").concat(e.name,"</option>")})).join("")),this.$selectSearchSite.on("change",(function(t){var o=s.default.sites.find((function(t){return t.id===e.$selectSearchSite.val()}));s.default.current=o,o.onSelected(),e.$autocompleteTags.empty(),e.$autocompleteTags.hide()})),this.safeSearchEnabled){var t=this.$selectSearchSite.children(".nsfw-site");t.attr("disabled",""),t.attr("hidden","")}s.default.current=s.default.sites[0],this.$btnSearch.on("click",(function(t){t.stopPropagation(),e.search()})),this.$btnLoadMore.on("click",(function(t){t.stopPropagation(),e.currentPage++,e.search(!0)})),this.$btnViewFullsize.on("click",(function(t){t.stopPropagation(),window.open(e.openedPost.getFullSizeImage(),"_blank"),e.$btnViewFullsize.trigger("blur")})),this.$btnOpenOriginalPost.on("click",(function(t){t.stopPropagation(),window.open(e.openedPost.originalPost,"_blank"),e.$btnOpenOriginalPost.trigger("blur")})),this.$btnCancelSearch.on("click",this.onSearchCancelClick.bind(this)),this.$btnPrevPost.on("click",this.onPrevPostClick.bind(this)),this.$btnNextPost.on("click",this.onNextPostClick.bind(this)),this.$btnCopyLink.on("click",this.onCopyButtonPressed.bind(this)),this.$btnDownload.on("click",this.onDownloadButtonPressed.bind(this)),this.$btnClosePost.on("click",this.onClosePostClick.bind(this)),$(window).on("keydown",this.onWindowKeyDown.bind(this)),$(window).on("resize",this.onWindowResize.bind(this)),this.onWindowResize(),this.$postInfoHeader.on("click",(function(t){console.log(e.openedPost)})),this.$btnSafeSearch.on("click",(function(t){if(t.stopPropagation(),!e.safeSearchEnabled||confirm("Are you sure you want to disable safe search?\n\nThis will allow sensitive or pornographic content to be displayed, as well as include new sites in the site dropdown that contain such content.")){e.safeSearchEnabled=!e.safeSearchEnabled,e.$btnSafeSearch.text(e.safeSearchEnabled?"Safe Search: ON":"Safe Search: OFF");var o=e.$selectSearchSite.children(".nsfw-site");e.safeSearchEnabled?(o.attr("disabled",""),o.attr("hidden","")):(o.removeAttr("disabled"),o.removeAttr("hidden"))}}));var o=new URLSearchParams(window.location.search),r=!!o.has("nsfw")&&"true"===o.get("nsfw");if(this.safeSearchEnabled=!r,this.$btnSafeSearch.text(this.safeSearchEnabled?"Safe Search: ON":"Safe Search: OFF"),o.has("site")){var a=o.get("site");(l=s.default.sites.find((function(e){return e.id===a&&(r||!e.isPorn)})))&&(s.default.current=l,l.onSelected(),this.$selectSearchSite.val(a))}if(o.has("tags")){var n=o.get("tags").split(",").map((function(e){return e.trim()}));1==n.length&&"landscape"==n[0]&&n.push("no_humans");for(var i=0,c=n;i<c.length;i++)""!==(d=c[i]).trim()&&this.addSearchTag(d);this.search()}if(o.has("domain")){var l,u=o.get("domain");(l=s.default.sites.find((function(e){return e.id===u&&(r||!e.isPorn)})))&&(s.default.current=l,l.onSelected(),this.$selectSearchSite.val(l.id),this.search())}if(o.has("q")){n=o.get("q").split(",").map((function(e){return e.trim()})),1==n.length&&"landscape"==n[0]&&n.push("no_humans");for(var h=0,p=n;h<p.length;h++){var d;""!==(d=p[h]).trim()&&this.addSearchTag(d)}this.search()}console.log("Frontend ready!")},e.posts=[],e.searchTags=[],e.currentPage=0,e.currentPost=-1,e.selectedAutocompleteTag=-1,e.searchViewOpen=!1,e.suppressAutocomplete=!1,e.leftColumnHeight=0,e.rightColumnHeight=0,e.safeSearchEnabled=!0,e.postTagTypes={},e.postProperties={},e}();t.default=i},673:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.requiresVideoPlayer=!1}return e.prototype.normalisedHeight=function(){return this.fullHeight/this.fullWidth},e.prototype.getThumbnail=function(){return this.imageResolutions[0]},e.prototype.getLargeImage=function(){return this.imageResolutions[1]||this.imageResolutions[0]},e.prototype.getFullSizeImage=function(){return this.imageResolutions[this.imageResolutions.length-1]},e}();t.default=o},873:function(e,t,o){var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var a in t=arguments[o])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)},s=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(a,n){function s(e){try{c(r.next(e))}catch(e){n(e)}}function i(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var o,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(i){return function(c){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;n&&(n=0,i[0]&&(s=0)),s;)try{if(o=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SiteBuilder=void 0;var c=o(710),l=o(885),u=o(431);function h(e){return e}var p=function(){function e(){}return e.generateNetworkAutocompleter=function(e,t,o){var r=this;return void 0===o&&(o={}),o.delay=o.delay||0,o.minLength=o.minLength||1,o.preprocessor=o.preprocessor||h,o.delay>0?function(a,s,i,c){var l=r.generateNetworkAutocompleter(e,t,n(n({},o),{delay:0}));return setTimeout(l.bind(a,s,i,c),o.delay)}:function(r,a,n,s){var i=c.default.decompose(r),l=i.negation,u=i.baseTag;if(u.length<(o.minLength||1))return a([]),n(),null;var h=encodeURI(e.replace("{tag}",u));return $.getJSON(h,(function(e){for(var r=[],s=0,i=o.preprocessor(e);s<i.length;s++){var c=i[s],u=t(c);u.label=l+u.label,u.value=l+u.value,r.push(u)}a(r),n()}))}},e.generateSearcher=function(e,t,o){return void 0===o&&(o={preprocessor:h,pageOffset:0,delimiter:" "}),function(r,a,n,s,i,c){o.safeSearchTag&&n&&(r=r.concat(o.safeSearchTag));var l=encodeURI(e.replace("{tags}",r.join(o.delimiter||" ")).replace("{page}",(a+(o.pageOffset||0)).toString()));return console.log("Searching... "+l),$.getJSON(l,(function(e){for(var r=[],n=0,c=o.preprocessor(e);n<c.length;n++){var l=c[n],u=t(l);u&&r.push(u)}console.log("Search successful"),s(r),i(a,r.length<20)})).fail(c)}},e.Generate=function(t){if(!t.autocompleteModule)return new(function(o){function r(){var r=null!==o&&o.apply(this,arguments)||this;return r.name=t.name,r.id=t.id,r.isPorn=t.isPorn,r.autocompleteEnabled=!1,r.activeSearchRequest=null,r.searcher=e.generateSearcher(t.searchUrl,t.searchTransformer,{safeSearchTag:t.safeSearchTag,preprocessor:t.searchPreprocessor||h,pageOffset:t.searchPageOffset||0,delimiter:t.searchTagDelimiter||" "}),r}return a(r,o),r.prototype.abortSearch=function(){this.activeSearchRequest&&(this.activeSearchRequest.abort(),this.activeSearchRequest=null)},r.prototype.search=function(e,t,o,r,a,n){this.abortSearch(),this.activeSearchRequest=this.searcher(e,t,o,r,a,n)},r}(u.default));if("url"in t.autocompleteModule){var o=t.autocompleteModule;return new(function(r){function n(){var a=null!==r&&r.apply(this,arguments)||this;return a.name=t.name,a.id=t.id,a.isPorn=t.isPorn,a.autocompleteEnabled=!0,a.activeAutocompleteRequest=null,a.activeSearchRequest=null,a.autocompleter=e.generateNetworkAutocompleter(o.url,o.transformer,{minLength:o.minLength,delay:o.delay,preprocessor:o.preprocessor}),a.searcher=e.generateSearcher(t.searchUrl,t.searchTransformer,{safeSearchTag:t.safeSearchTag,preprocessor:t.searchPreprocessor||h,pageOffset:t.searchPageOffset||0,delimiter:t.searchTagDelimiter||" "}),a}return a(n,r),n.prototype.abortAutocomplete=function(){this.activeAutocompleteRequest&&(this.activeAutocompleteRequest.abort(),this.activeAutocompleteRequest=null)},n.prototype.autocomplete=function(e,t,o,r){this.abortAutocomplete(),this.activeAutocompleteRequest=this.autocompleter(e,t,o,r)||this.activeAutocompleteRequest},n.prototype.abortSearch=function(){this.activeSearchRequest&&(this.activeSearchRequest.abort(),this.activeSearchRequest=null)},n.prototype.search=function(e,t,o,r,a,n){this.abortSearch(),this.activeSearchRequest=this.searcher(e,t,o,r,a,n)},n}(u.default))}if("summaryUrl"in t.autocompleteModule){var r=t.autocompleteModule;return new(function(o){function n(){var r=null!==o&&o.apply(this,arguments)||this;return r.name=t.name,r.id=t.id,r.isPorn=t.isPorn,r.autocompleteEnabled=!1,r.activeAutocompleteRequest=null,r.activeSearchRequest=null,r.searcher=e.generateSearcher(t.searchUrl,t.searchTransformer,{safeSearchTag:t.safeSearchTag,preprocessor:t.searchPreprocessor||h,pageOffset:t.searchPageOffset||0,delimiter:t.searchTagDelimiter||" "}),r}return a(n,o),n.prototype.onSelected=function(){return s(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=this,[4,l.default.verifyCache(this,r.summaryUrl,r.version)];case 1:return e.tagCache=t.sent(),this.autocompleteEnabled=!0,[2]}}))}))},n.prototype.abortAutocomplete=function(){this.activeAutocompleteRequest&&(clearTimeout(this.activeAutocompleteRequest),this.activeAutocompleteRequest=null)},n.prototype.autocomplete=function(e,o,a,n){var s=this;this.abortAutocomplete(),this.activeAutocompleteRequest=setTimeout((function(){o(l.default.complete(e,s.tagCache,r.typeToEnum)),a()}),t.autocompleteModule.delay||0)},n.prototype.abortSearch=function(){this.activeSearchRequest&&(this.activeSearchRequest.abort(),this.activeSearchRequest=null)},n.prototype.search=function(e,t,o,r,a,n){this.abortSearch(),this.activeSearchRequest=this.searcher(e,t,o,r,a,n)},n}(u.default))}},e.ExtractImagesGelboorulike=function(e){var t=[e.preview_url,e.file_url];return e.sample&&e.sample_url&&t.push(e.sample_url),t},e}();t.SiteBuilder=p},216:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=o(476),a=o(543),n=o(681),s=o(647),i=o(257),c=o(816),l=o(933),u=o(431);function h(e){u.default.sites.push(e),e.onRegistered()}t.default=function(){h(new r.default),h(a.default),h(n.default),h(s.default),h(c.default),h(l.default),h(i.default)}},431:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.autocompleteEnabled=!1,this.isPorn=!1}return e.prototype.onRegistered=function(){},e.prototype.onSelected=function(){},e.prototype.autocomplete=function(e,t,o,r){r("Autocomplete not implemented")},e.prototype.abortAutocomplete=function(){},e.prototype.search=function(e,t,o,r,a,n){n("Search not implemented")},e.prototype.abortSearch=function(){},e.prototype.getPostByID=function(e){return new Promise((function(e,t){t("getPostByID not implemented")}))},e.sites=[],e}();t.default=o},476:function(e,t,o){var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(a,n){function s(e){try{c(r.next(e))}catch(e){n(e)}}function i(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var o,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(i){return function(c){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;n&&(n=0,i[0]&&(s=0)),s;)try{if(o=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},i=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var r,a=0,n=t.length;a<n;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var c=o(673),l=o(431),u=o(710),h=o(558),p=o(882),d=o(873),f={g:"General",s:"Sensitive",q:"Questionable",e:"Explicit"},g={0:h.default.General,1:h.default.Artist,3:h.default.Copyright,4:h.default.Character,5:h.default.Meta},m=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.name="Danbooru",o.id="danbooru",o.autocompleteEnabled=!0,o.isPorn=!1,o.activeAutocompleteRequest=null,o.activeSearchRequest=null,o.autocompleter=d.SiteBuilder.generateNetworkAutocompleter("https://danbooru.donmai.us/autocomplete.json?only=name,post_count,category&limit=10&search[type]=tag_query&search[query]={tag}",t.autocompleteTransformFunction,{minLength:3}),o}return a(t,e),t.prototype.wait=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.prototype.abortAutocomplete=function(){this.activeAutocompleteRequest&&(this.activeAutocompleteRequest.abort(),this.activeAutocompleteRequest=null)},t.autocompleteTransformFunction=function(e){var t=new u.default;return e.post_count?t.label="".concat(e.label," (").concat(e.post_count,")"):t.label=e.label,t.value=e.value,t.type=g[e.category]||h.default.Other,t},t.prototype.autocomplete=function(e,t,o,r){this.abortAutocomplete(),this.activeSearchRequest=this.autocompleter(e,t,o,r)||this.activeSearchRequest},t.prototype.abortSearch=function(){this.activeSearchRequest&&this.activeSearchRequest.abort()},t.prototype.danbooruPostToBooringPost=function(e){if(!e.preview_file_url&&!e.large_file_url&&!e.file_url)return null;var t=new c.default;return t.site=this,t.id=e.id.toString(),t.imageResolutions=[e.preview_file_url,e.large_file_url,e.file_url],t.fullWidth=e.image_width,t.fullHeight=e.image_height,t.originalPost="https://danbooru.donmai.us/posts/".concat(e.id),t.properties={Rating:f[e.rating],Size:"".concat(Math.round(e.file_size/1e3)," KB (").concat(e.image_width,"x").concat(e.image_height,")"),Source:e.source,Date:e.created_at.split("T")[0],Score:e.score.toString(),Favourites:e.fav_count.toString()},t.tagTypes={Artist:e.tag_string_artist.split(" "),Copyright:e.tag_string_copyright.split(" "),Character:e.tag_string_character.split(" "),General:e.tag_string_general.split(" "),Meta:e.tag_string_meta.split(" ")},t.requiresVideoPlayer=e.large_file_url.endsWith(".webm")||e.large_file_url.endsWith(".mp4")||e.file_url.endsWith(".webm")||e.file_url.endsWith(".mp4"),t},t.prototype.rawSearch=function(e,t,o){var r=this;return new Promise((function(a,n){r.abortSearch();var s=encodeURI("https://danbooru.donmai.us/posts.json?page=".concat(t+1,"&limit=").concat(o,"&tags=").concat(e.join(" ")));r.activeSearchRequest=$.getJSON(s,(function(e){a({results:e,endOfResults:e.length<o})})).fail(n)}))},t.prototype.simpleSearch=function(e,t){var o=this;return new Promise((function(r,a){o.abortSearch();var n=encodeURI("https://danbooru.donmai.us/posts.json?page=".concat(t+1,"&limit=20&tags=").concat(e.join(" ")));o.activeSearchRequest=$.getJSON(n,(function(e){for(var t=[],a=0,n=e;a<n.length;a++){var s=n[a],i=o.danbooruPostToBooringPost(s);i&&t.push(i)}r({posts:t,endOfResults:e.length<20})})).fail(a)}))},t.prototype.analyseTags=function(e){for(var t=[],o=[],r=[],a=0,n=e;a<n.length;a++){var s=n[a];s.startsWith("-")?r.push(s.substring(1)):s.startsWith("rating:")?t.push(s):o.push(s)}return{untaxedTags:t,taxedTags:o,negatedTags:r}},t.prototype.search=function(e,t,o,r,a,c){return n(this,void 0,void 0,(function(){var n,l,u,h,d,f,g,m,v,y,b,w,S,$,P,T,_,x,R,C,O,k,A,I,q,j,M,E;return s(this,(function(s){switch(s.label){case 0:if(o&&!e.includes("rating:general")&&e.push("rating:general"),n=this.analyseTags(e),l=n.untaxedTags,u=n.taxedTags,h=n.negatedTags,!(u.length+h.length<3))return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.simpleSearch(e,t)];case 2:return O=s.sent(),r(O.posts),a(t,O.endOfResults),[3,4];case 3:return d=s.sent(),c(d),[3,4];case 4:return[2];case 5:f=Array.from(new Set(i(i([],u,!0),h,!0))),s.label=6;case 6:return s.trys.push([6,8,,9]),[4,(0,p.asyncGetJSON)("https://danbooru.donmai.us/tags.json?search[name_comma]=".concat(f.join(",")))];case 7:return g=s.sent(),[3,9];case 8:return m=s.sent(),c(m),[2];case 9:v=g.filter((function(e){return u.includes(e.name)})),y=g.filter((function(e){return h.includes(e.name)})),b=Array.from(v).sort((function(e,t){return e.post_count-t.post_count})).map((function(e){return e.name})),w=Array.from(y).sort((function(e,t){return t.post_count-e.post_count})).map((function(e){return e.name})),S=b.slice(0,2),$=w.slice(0,Math.max(0,2-S.length)),P=i(i(i([],S,!0),$.map((function(e){return"-"+e})),!0),l,!0),T=b.slice(S.length),_=w.slice($.length),x=0,R=0,C=0,s.label=10;case 10:s.label=11;case 11:return s.trys.push([11,14,,15]),[4,this.wait(250)];case 12:return s.sent(),[4,this.rawSearch(P,t+R,30)];case 13:for(O=s.sent(),k=[],A=function(e){var t=e.tag_string.split(" ");if(T.some((function(e){return!t.includes(e)})))return"continue";if(_.some((function(e){return t.includes(e)})))return"continue";var o=I.danbooruPostToBooringPost(e);o&&k.push(o)},I=this,q=0,j=O.results;q<j.length;q++)M=j[q],A(M);return 0===k.length?C++:C=0,r(k),x+=k.length,C>=5||x>=20||O.endOfResults?(a(t+R,O.endOfResults),[2]):[3,15];case 14:return E=s.sent(),c(E),[2];case 15:return R++,[3,10];case 16:return[2]}}))}))},t}(l.default);t.default=m},543:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=o(673),a=o(558),n=o(873),s=o(882),i={general:"General",sensitive:"Sensitive",questionable:"Questionable",explicit:"Explicit"},c={tag:a.default.General,artist:a.default.Artist,copyright:a.default.Copyright,character:a.default.Character,metadata:a.default.Meta},l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=n.SiteBuilder.Generate({name:"Gelbooru",id:"gelbooru",isPorn:!1,autocompleteModule:{url:(0,s.proxify)("json","https://gelbooru.com/index.php?page=autocomplete2&type=tag_query&limit=10&term={tag}"),transformer:function(e){return{label:"".concat(e.label," (").concat(e.post_count,")"),value:e.value,type:c[e.category]}}},searchUrl:(0,s.proxify)("json","https://gelbooru.com/index.php?page=dapi&s=post&q=index&json=1&limit=20&pid={page}&tags={tags}"),safeSearchTag:"rating:general",searchPreprocessor:function(e){return e.post||[]},searchTransformer:function(e){var t=new r.default;t.site=u,t.id=e.id.toString(),t.imageResolutions=[e.preview_url,(0,s.proxify)("gelbooru",e.file_url)],1==e.sample&&e.sample_url&&t.imageResolutions.splice(1,0,(0,s.proxify)("gelbooru",e.sample_url)),t.fullWidth=e.width,t.fullHeight=e.height,t.originalPost="https://gelbooru.com/index.php?page=post&s=view&id=".concat(e.id);var o=e.created_at.split(" "),a=l.indexOf(o[1])+1,n=o[2],c=o[5].padStart(4,"0")+"-"+String(a).padStart(2,"0")+"-"+n.padStart(2,"0");return t.properties={Rating:i[e.rating],Size:"".concat(e.width,"x").concat(e.height),Source:e.source,Date:c,Score:e.score.toString(),"Last Updated":new Date(1e3*e.change).toISOString().split("T")[0]},t.tagTypes={Tags:e.tags.split(" ")},t.requiresVideoPlayer=e.sample_url.endsWith(".mp4")||e.sample_url.endsWith(".webm")||e.file_url.endsWith(".mp4")||e.file_url.endsWith(".webm"),t}});t.default=u},816:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=o(673),a=o(873),n=o(558),s=o(882),i={s:"Safe",q:"Questionable",e:"Explicit"},c=a.SiteBuilder.Generate({name:"Konachan",id:"konachan",isPorn:!1,autocompleteModule:{summaryUrl:(0,s.proxify)("json","https://konachan.com/tag/summary.json"),version:"1",typeToEnum:{0:n.default.General,1:n.default.Artist,3:n.default.Copyright,4:n.default.Character,5:n.default.Meta},delay:333},searchUrl:(0,s.proxify)("json","https://konachan.com/post.json?limit=20&page={page}&tags={tags}"),safeSearchTag:"rating:s",searchPageOffset:1,searchTransformer:function(e){var t=new r.default;return t.site=c,t.id=e.id.toString(),t.imageResolutions=[e.preview_url,e.sample_url,e.jpeg_url,e.file_url],t.fullWidth=e.width,t.fullHeight=e.height,t.originalPost="https://konachan.com/post/show/".concat(e.id),t.properties={Rating:i[e.rating],Size:"".concat(Math.round(e.file_size/1e3)," KB (").concat(e.width,"x").concat(e.height,")"),Source:""==e.source?"Unknown":e.source,Uploader:e.author,Date:new Date(1e3*e.created_at).toISOString().split("T")[0],Score:e.score.toString()},t.tagTypes={Tags:e.tags.split(" ")},t}});t.default=c},257:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=o(673),a=o(558),n=o(873),s=o(882),i={general:"General",sensitive:"Sensitive",questionable:"Questionable",explicit:"Explicit"},c=n.SiteBuilder.Generate({name:"Rule 34",id:"rule34",isPorn:!0,autocompleteModule:{url:(0,s.proxify)("rule34","https://rule34.xxx/public/autocomplete.php?q={tag}"),transformer:function(e){return{label:e.label,value:e.value,type:a.default.General}}},searchUrl:"https://api.rule34.xxx/index.php?page=dapi&s=post&q=index&json=1&limit=20&&pid={page}&tags={tags}",searchTransformer:function(e){var t=new r.default;t.site=c,t.id=e.id.toString(),t.imageResolutions=[e.preview_url,e.file_url],e.sample&&e.sample_url&&t.imageResolutions.splice(1,0,e.sample_url);for(var o=0;o<t.imageResolutions.length;o++){var a=t.imageResolutions[o];if(a.includes("mp4")||a.includes("webm")){var n=new URL(a);t.imageResolutions[o]=(0,s.proxify)("rule34","https://uswebm.rule34.xxx/"+n.pathname+"?"+t.id+"=")}}return t.fullWidth=e.width,t.fullHeight=e.height,t.originalPost="https://rule34.xxx/index.php?page=post&s=view&id=".concat(e.id),t.properties={Rating:i[e.rating],Size:"".concat(e.width,"x").concat(e.height),Source:e.source,Uploader:e.owner||"Unknown",Score:e.score.toString(),"Last Updated":new Date(1e3*e.change).toISOString().split("T")[0]},t.tagTypes={Tags:e.tags.split(" ")},t.requiresVideoPlayer=e.image.endsWith(".mp4")||e.image.endsWith(".webm"),t}});t.default=c},647:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=o(673),a=o(558),n=o(873),s=o(882),i=n.SiteBuilder.Generate({name:"Safebooru",id:"safebooru",isPorn:!1,autocompleteModule:{url:(0,s.proxify)("json","https://safebooru.org/autocomplete.php?q={tag}"),transformer:function(e){return{label:e.label,value:e.value,type:a.default.General}}},searchUrl:(0,s.proxify)("json","https://safebooru.org/index.php?page=dapi&s=post&q=index&json=1&limit=20&&pid={page}&tags={tags}"),safeSearchTag:"rating:general",searchTransformer:function(e){var t,o,a=new r.default;return a.site=i,a.id=e.id.toString(),a.imageResolutions=["https://safebooru.org/thumbnails/".concat(e.directory,"/thumbnail_").concat(e.image),"https://safebooru.org/images/".concat(e.directory,"/").concat(e.image)],e.sample&&a.imageResolutions.splice(1,0,"https://safebooru.org/samples/".concat(e.directory,"/sample_").concat(e.image)),a.fullWidth=e.width,a.fullHeight=e.height,a.originalPost="https://safebooru.org/index.php?page=post&s=view&id=".concat(e.id),a.properties={"Last Updated":new Date(1e3*e.change).toISOString().split("T")[0],Size:"".concat(e.width,"x").concat(e.height),Owner:e.owner||"Unknown",Rating:"General",Score:null!==(o=null===(t=e.score)||void 0===t?void 0:t.toString())&&void 0!==o?o:"0"},a.tagTypes={Tags:e.tags.split(" ")},a.requiresVideoPlayer=e.image.endsWith(".mp4")||e.image.endsWith(".webm"),a}});t.default=i},681:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=o(673),a=o(873),n=o(558),s=o(882),i={s:"Safe",q:"Questionable",e:"Explicit"},c=a.SiteBuilder.Generate({name:"Yande.re",id:"yandere",isPorn:!1,autocompleteModule:{summaryUrl:"https://yande.re/tag/summary.json",version:"1",typeToEnum:{0:n.default.General,1:n.default.Artist,3:n.default.Copyright,4:n.default.Character,5:n.default.Circle},delay:333},searchUrl:"https://yande.re/post.json?limit=20&page={page}&tags={tags}",safeSearchTag:"rating:s",searchPageOffset:1,searchTransformer:function(e){var t=new r.default;return t.site=c,t.id=e.id.toString(),t.imageResolutions=[e.preview_url,(0,s.proxify)("yandere",e.sample_url),(0,s.proxify)("yandere",e.jpeg_url),(0,s.proxify)("yandere",e.file_url)],t.fullWidth=e.width,t.fullHeight=e.height,t.originalPost="https://yande.re/post/show/".concat(e.id),t.properties={Rating:i[e.rating],Size:"".concat(Math.round(e.file_size/1e3)," KB (").concat(e.width,"x").concat(e.height,")"),Source:""==e.source?"Unknown":e.source,Uploader:e.author,Date:new Date(e.created_at).toISOString().split("T")[0],"Last Updated":new Date(e.updated_at).toISOString().split("T")[0],Score:e.score.toString()},t.tagTypes={Tags:e.tags.split(" ")},t}});t.default=c},933:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=o(673),a=o(873),n=o(558),s=o(882),i={theme:n.default.General,game:n.default.Copyright,character:n.default.Character,mangaka:n.default.Artist,source:n.default.Meta,"Character Group":n.default.Character},c=a.SiteBuilder.Generate({name:"Zerochan",id:"zerochan",isPorn:!1,autocompleteModule:{url:(0,s.proxify)("generic","https://www.zerochan.net/suggest?q={tag}&json=1&limit=10"),preprocessor:function(e){return e.suggestions},transformer:function(e){return{label:e.value,value:e.value,type:i[e.icon||e.type]||n.default.General}}},searchUrl:(0,s.proxify)("generic","https://www.zerochan.net/{tags}?l=20&p={page}&json"),searchPageOffset:1,searchTagDelimiter:",",searchPreprocessor:function(e){return e.items},searchTransformer:function(e){var t=new r.default;return t.site=c,t.id=e.id.toString(),t.imageResolutions=[e.thumbnail||e.small],t.fullWidth=e.width,t.fullHeight=e.height,t.originalPost="https://www.zerochan.net/".concat(e.id),t.properties={Rating:"General",Source:""==e.source?"Unknown":e.source,Size:"".concat(e.width,"x").concat(e.height)},t.tagTypes={Tags:e.tags},$.getJSON((0,s.proxify)("generic","https://www.zerochan.net/".concat(e.id,"?json")),(function(e){t.imageResolutions.push(e.medium),t.imageResolutions.push(e.large),t.imageResolutions.push(e.full),t.properties.Size="".concat(Math.round(e.size/1e3)," KB (").concat(e.width,"x").concat(e.height,")")})),t}});t.default=c},558:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Artist="artist",e.Copyright="copyright",e.Character="character",e.General="general",e.Meta="meta",e.Circle="circle",e.Other="other"}(o||(o={})),t.default=o},882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.proxify=t.asyncGetJSON=void 0,t.asyncGetJSON=function(e){return new Promise((function(t,o){$.getJSON(e,t).fail(o)}))},t.proxify=function(e,t){return"".concat(window.location.origin,"/proxy/").concat(e,"/").concat(t)}}},o={};function r(e){var a=o[e];if(void 0!==a)return a.exports;var n=o[e]={exports:{}};return t[e].call(n.exports,n,n.exports,r),n.exports}e=r(263),(0,r(216).default)(),$(e.default.main.bind(e.default))})();